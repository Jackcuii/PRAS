import matplotlib.pyplot as plt
import numpy as np

# 数据准备
cmos_data = {2: 0.5126903553299492, 3: 0.5025380710659898, 4: 0.5076142131979695, 5: 0.5939086294416244, 6: 0.5126903553299492, 7: 0.5126903553299492, 8: 0.5126903553299492, 9: 0.5228426395939086, 10: 0.5177664974619289, 11: 0.5939086294416244, 12: 0.5583756345177665, 13: 0.5431472081218274, 14: 0.5177664974619289, 15: 0.5076142131979695, 16: 0.5076142131979695, 17: 0.5177664974619289, 18: 0.5583756345177665, 19: 0.5736040609137056, 20: 0.5126903553299492, 22: 0.5025380710659898, 24: 0.5431472081218274, 26: 0.6091370558375635, 28: 0.5126903553299492, 30: 0.5076142131979695, 32: 0.5076142131979695, 34: 0.5380710659898477, 36: 0.5380710659898477, 38: 0.5329949238578681, 40: 0.583756345177665, 42: 0.5177664974619289, 44: 0.5888324873096447, 46: 0.5126903553299492, 48: 0.5076142131979695}

bili_data = {2: 0.6553030303030303, 3: 0.6856060606060606, 4: 0.6590909090909091, 5: 0.7196969696969697, 6: 0.696969696969697, 7: 0.6666666666666666, 8: 0.6856060606060606, 9: 0.6136363636363636, 10: 0.7045454545454546, 11: 0.6856060606060606, 12: 0.6515151515151515, 13: 0.678030303030303, 14: 0.6818181818181818, 15: 0.6856060606060606, 16: 0.6856060606060606, 17: 0.6666666666666666, 18: 0.6856060606060606, 19: 0.6931818181818182, 20: 0.6856060606060606, 22: 0.6893939393939394, 24: 0.6856060606060606, 26: 0.6628787878787878, 28: 0.696969696969697, 30: 0.7007575757575758, 32: 0.6515151515151515, 34: 0.6931818181818182, 36: 0.6590909090909091, 38: 0.696969696969697, 40: 0.7007575757575758, 42: 0.678030303030303, 44: 0.6742424242424242, 46: 0.6856060606060606, 48: 0.6856060606060606}

ap_data = {2: 0.5, 3: 0.5099009900990099, 4: 0.5643564356435643, 5: 0.5445544554455446, 6: 0.5099009900990099, 7: 0.5495049504950495, 8: 0.5544554455445545, 9: 0.599009900990099, 10: 0.6831683168316832, 11: 0.599009900990099, 12: 0.594059405940594, 13: 0.5445544554455446, 14: 0.6287128712871287, 15: 0.5742574257425742, 16: 0.5495049504950495, 17: 0.5445544554455446, 18: 0.5495049504950495, 19: 0.5495049504950495, 20: 0.5495049504950495, 21: 0.5693069306930693, 22: 0.5742574257425742, 23: 0.599009900990099, 24: 0.5346534653465347, 25: 0.5396039603960396, 26: 0.5495049504950495, 27: 0.5594059405940595, 28: 0.6039603960396039, 29: 0.504950495049505, 30: 0.5594059405940595, 31: 0.5445544554455446, 32: 0.5544554455445545, 33: 0.5445544554455446, 34: 0.6287128712871287, 35: 0.6039603960396039, 36: 0.5495049504950495, 37: 0.5445544554455446, 38: 0.5495049504950495, 39: 0.6039603960396039, 40: 0.6089108910891089, 41: 0.5891089108910891, 42: 0.5495049504950495, 43: 0.5396039603960396, 44: 0.5643564356435643, 45: 0.5742574257425742, 46: 0.6089108910891089, 47: 0.6138613861386139, 48: 0.6089108910891089, 49: 0.5445544554455446}

ap_tuned = {2: 0.5346534653465347, 3: 0.5396039603960396, 4: 0.5544554455445545, 5: 0.5247524752475248, 6: 0.5396039603960396, 7: 0.5346534653465347, 8: 0.5396039603960396, 9: 0.5445544554455446, 10: 0.5346534653465347, 11: 0.5198019801980198, 12: 0.5495049504950495, 13: 0.5544554455445545, 14: 0.5396039603960396, 15: 0.5346534653465347, 16: 0.5445544554455446, 17: 0.5396039603960396, 18: 0.5346534653465347, 19: 0.5148514851485149, 20: 0.5346534653465347, 21: 0.5297029702970297, 22: 0.5396039603960396, 23: 0.5594059405940595, 24: 0.5495049504950495, 25: 0.5396039603960396, 26: 0.5396039603960396, 27: 0.5297029702970297, 28: 0.5346534653465347, 29: 0.5297029702970297, 30: 0.5396039603960396, 31: 0.5346534653465347, 32: 0.5495049504950495, 33: 0.5297029702970297, 34: 0.5198019801980198, 35: 0.5346534653465347, 36: 0.5247524752475248, 37: 0.5297029702970297, 38: 0.5346534653465347, 39: 0.5346534653465347, 40: 0.5396039603960396, 41: 0.5247524752475248, 42: 0.5445544554455446, 43: 0.5148514851485149, 44: 0.5495049504950495, 45: 0.5346534653465347, 46: 0.5247524752475248, 47: 0.5495049504950495, 48: 0.5396039603960396, 49: 0.5396039603960396}

ap_further_tuned = {2: 0.5247524752475248, 3: 0.4900990099009901, 4: 0.5445544554455446, 5: 0.5544554455445545, 6: 0.5445544554455446, 7: 0.5495049504950495, 8: 0.5346534653465347, 9: 0.5396039603960396, 10: 0.5396039603960396, 11: 0.5841584158415841, 12: 0.5544554455445545, 13: 0.5445544554455446, 14: 0.5346534653465347, 15: 0.5346534653465347, 16: 0.5247524752475248, 17: 0.5346534653465347, 18: 0.5346534653465347, 19: 0.48514851485148514, 20: 0.5346534653465347, 21: 0.5346534653465347, 22: 0.5346534653465347, 23: 0.5396039603960396, 24: 0.5247524752475248, 25: 0.5297029702970297, 26: 0.5396039603960396, 27: 0.5792079207920792, 28: 0.5841584158415841, 29: 0.5396039603960396, 30: 0.4207920792079208, 31: 0.5841584158415841, 32: 0.5693069306930693, 33: 0.5297029702970297, 34: 0.5346534653465347, 35: 0.5445544554455446, 36: 0.5346534653465347, 37: 0.5495049504950495, 38: 0.5297029702970297, 39: 0.5297029702970297, 40: 0.5495049504950495, 41: 0.4900990099009901, 42: 0.5247524752475248, 43: 0.5445544554455446, 44: 0.5247524752475248, 45: 0.5346534653465347, 46: 0.5742574257425742, 47: 0.5445544554455446, 48: 0.5396039603960396, 49: 0.5396039603960396}

ap_1 = {2: 0.5, 3: 0.5099009900990099, 4: 0.5643564356435643, 5: 0.45544554455445546, 6: 0.5099009900990099, 7: 0.4504950495049505, 8: 0.44554455445544555, 9: 0.599009900990099, 10: 0.6831683168316832, 11: 0.599009900990099, 12: 0.594059405940594, 13: 0.45544554455445546, 14: 0.6287128712871287, 15: 0.42574257425742573, 16: 0.4504950495049505, 17: 0.45544554455445546, 18: 0.4504950495049505, 19: 0.4504950495049505, 20: 0.4504950495049505, 21: 0.5693069306930693, 22: 0.5742574257425742, 23: 0.599009900990099, 24: 0.46534653465346537, 25: 0.4603960396039604, 26: 0.4504950495049505, 27: 0.4405940594059406, 28: 0.6039603960396039, 29: 0.504950495049505, 30: 0.4405940594059406, 31: 0.45544554455445546, 32: 0.44554455445544555, 33: 0.45544554455445546, 34: 0.6287128712871287, 35: 0.6039603960396039, 36: 0.4504950495049505, 37: 0.45544554455445546, 38: 0.4504950495049505, 39: 0.6039603960396039, 40: 0.6089108910891089, 41: 0.5891089108910891, 42: 0.4504950495049505, 43: 0.4603960396039604, 44: 0.43564356435643564, 45: 0.5742574257425742, 46: 0.6089108910891089, 47: 0.6138613861386139, 48: 0.6089108910891089, 49: 0.45544554455445546}

ap_2 = {2: 0.5, 3: 0.4900990099009901, 4: 0.43564356435643564, 5: 0.5445544554455446, 6: 0.4900990099009901, 7: 0.5495049504950495, 8: 0.5544554455445545, 9: 0.400990099009901, 10: 0.31683168316831684, 11: 0.400990099009901, 12: 0.40594059405940597, 13: 0.5445544554455446, 14: 0.3712871287128713, 15: 0.5742574257425742, 16: 0.5495049504950495, 17: 0.5445544554455446, 18: 0.5495049504950495, 19: 0.5495049504950495, 20: 0.5495049504950495, 21: 0.4306930693069307, 22: 0.42574257425742573, 23: 0.400990099009901, 24: 0.5346534653465347, 25: 0.5396039603960396, 26: 0.5495049504950495, 27: 0.5594059405940595, 28: 0.39603960396039606, 29: 0.49504950495049505, 30: 0.5594059405940595, 31: 0.5445544554455446, 32: 0.5544554455445545, 33: 0.5445544554455446, 34: 0.3712871287128713, 35: 0.39603960396039606, 36: 0.5495049504950495, 37: 0.5445544554455446, 38: 0.5495049504950495, 39: 0.39603960396039606, 40: 0.3910891089108911, 41: 0.41089108910891087, 42: 0.5495049504950495, 43: 0.5396039603960396, 44: 0.5643564356435643, 45: 0.42574257425742573, 46: 0.3910891089108911, 47: 0.38613861386138615, 48: 0.3910891089108911, 49: 0.5445544554455446}

ap_few = {2: 0.5, 3: 0.5099009900990099, 4: 0.43564356435643564, 5: 0.5445544554455446, 6: 0.5099009900990099, 7: 0.5495049504950495, 8: 0.5544554455445545, 9: 0.400990099009901, 10: 0.6831683168316832, 11: 0.400990099009901, 12: 0.40594059405940597, 13: 0.5445544554455446, 14: 0.6287128712871287, 15: 0.5742574257425742, 16: 0.5495049504950495, 17: 0.5445544554455446, 18: 0.5495049504950495, 19: 0.5495049504950495, 20: 0.5495049504950495, 21: 0.5693069306930693, 22: 0.42574257425742573, 23: 0.400990099009901, 24: 0.5346534653465347, 25: 0.5396039603960396, 26: 0.5495049504950495, 27: 0.5594059405940595, 28: 0.39603960396039606, 29: 0.49504950495049505, 30: 0.5594059405940595, 31: 0.5445544554455446, 32: 0.5544554455445545, 33: 0.5445544554455446, 34: 0.6287128712871287, 35: 0.6039603960396039, 36: 0.5495049504950495, 37: 0.5445544554455446, 38: 0.5495049504950495, 39: 0.39603960396039606, 40: 0.3910891089108911, 41: 0.41089108910891087, 42: 0.5495049504950495, 43: 0.5396039603960396, 44: 0.5643564356435643, 45: 0.42574257425742573, 46: 0.6089108910891089, 47: 0.38613861386138615, 48: 0.3910891089108911, 49: 0.5445544554455446}

# 创建图表
plt.figure(figsize=(12, 6))

# 绘制三条线
x = list(ap_data.keys())
#plt.plot(x, list(cmos_data.values()), 'b-', label='CMOS', marker='o')
#plt.plot(x, list(bili_data.values()), 'r-', label='Bili', marker='s')
plt.plot(x, list(ap_data.values()), 'g-', label='AP', marker='^')
#plt.plot(x, list(ap_tuned.values()), 'y-', label='AP Tuned', marker='*')
#plt.plot(x, list(ap_further_tuned.values()), 'c-', label='AP Further Tuned', marker='o')
# use different color for different line
#plt.plot(x, list(ap_further_tuned.values()),
plt.plot(x, list(ap_1.values()), 'c-', label='AP1', marker='o')
plt.plot(x, list(ap_2.values()), 'm-', label='AP2', marker='s')
plt.plot(x, list(ap_few.values()), 'b-', label='AP Fewer', marker='d')

# draw average line for each group

plt.axhline(y=np.mean(list(ap_data.values())), color='g', linestyle='--', label='AP Avg')
print(np.mean(list(ap_data.values())))
#plt.axhline(y=np.mean(list(ap_tuned.values())), color='y', linestyle='--', label='AP Tuned Avg')
print(np.mean(list(ap_tuned.values())))
#plt.axhline(y=np.mean(list(ap_further_tuned.values())), color='c', linestyle='--', label='AP Further Tuned Avg')
print(np.mean(list(ap_further_tuned.values())))
plt.axhline(y=np.mean(list(ap_1.values())), color='c', linestyle='--', label='AP1 Avg')
print(np.mean(list(ap_1.values())))
plt.axhline(y=np.mean(list(ap_2.values())), color='m', linestyle='--', label='AP2 Avg')
print(np.mean(list(ap_2.values())))
plt.axhline(y=np.mean(list(ap_few.values())), color='b', linestyle='--', label='AP Fewer Avg')
print(np.mean(list(ap_few.values())))

plt.axhline(y=0.65, color='r', linestyle='--', label='LLM')
# 设置图表属性
plt.title('Dim v.s.Perf', fontsize=14)
plt.xlabel('Reduced_dim', fontsize=12)
plt.ylabel('Accuracy', fontsize=12)
plt.grid(True, linestyle='--', alpha=0.7)
plt.legend(fontsize=10)

# 设置x轴刻度
plt.xticks(x, rotation=45)

# 添加网格
plt.grid(True, linestyle='--', alpha=0.3)

# 调整布局
plt.tight_layout()

# 显示图表
plt.show()
